<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_192) on Fri Apr 26 02:58:27 BST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Model</title>
<meta name="date" content="2019-04-26">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Model";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class Model" class="title">Class Model</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Model</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Model</span>
extends java.lang.Object</pre>
<div class="block"><h2>This manages the state of the game</h2>
    
    <p>The model represents all the actual content and functionality of the app
    For Breakout, it manages all the game objects that the View needs
    (the bat, ball, bricks, and the score), provides methods to allow the Controller
    to move the bat (and a couple of other functions - change the speed or stop 
    the game), and runs a background process (a 'thread') that moves the ball 
    every 20 milliseconds and checks for collisions.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Roger Evans (modified by Ryan Light)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#B">B</a></span></code>
<div class="block">Border round the edge of the panel</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>GameObj</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#ball">ball</a></span></code>
<div class="block">The ball object</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BALL_MOVE">BALL_MOVE</a></span></code>
<div class="block">Units to move the ball on each step</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BALL_SIZE">BALL_SIZE</a></span></code>
<div class="block">Ball size</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>BatObj</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#bat">bat</a></span></code>
<div class="block">The bat object</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BAT_DIR">BAT_DIR</a></span></code>
<div class="block">Indicates if bat is travelling Left or Right</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BAT_HEIGHT">BAT_HEIGHT</a></span></code>
<div class="block">Bat height</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BAT_MOVE">BAT_MOVE</a></span></code>
<div class="block">Distance to move the bat on each update</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BAT_WIDTH">BAT_WIDTH</a></span></code>
<div class="block">Bat width</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BRICK_HEIGHT">BRICK_HEIGHT</a></span></code>
<div class="block">Brick height</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#BRICK_WIDTH">BRICK_WIDTH</a></span></code>
<div class="block">Brick width</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;BrickObj&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#bricks">bricks</a></span></code>
<div class="block">Array of the bricks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) Controller</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#controller">controller</a></span></code>
<div class="block">Reference to the controller object</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#fast">fast</a></span></code>
<div class="block">Depreciated</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#gameRunning">gameRunning</a></span></code>
<div class="block"><code>True</code> if game is running <code>false</code> if not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Random</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#generator">generator</a></span></code>
<div class="block">Random number generator</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#height">height</a></span></code>
<div class="block">Height of game window</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#HIT_BOTTOM">HIT_BOTTOM</a></span></code>
<div class="block">Score (penalty) for hitting the bottom of the screen</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#HIT_BRICK">HIT_BRICK</a></span></code>
<div class="block">Score for hitting a brick</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#level">level</a></span></code>
<div class="block">Which level is being played</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#lives">lives</a></span></code>
<div class="block">Player lives remaining</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#M">M</a></span></code>
<div class="block">Height of the menu bar area at the top of the screen</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#nextSpeedup">nextSpeedup</a></span></code>
<div class="block">Interval in seconds until the game next speeds the ball up</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#score">score</a></span></code>
<div class="block">The score</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#start">start</a></span></code>
<div class="block">System time in milliseconds when the level commenced</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) View</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#view">view</a></span></code>
<div class="block">Reference to the view object</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#width">width</a></span></code>
<div class="block">Width of game window</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>javafx.stage.Stage</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#window">window</a></span></code>
<div class="block">The model needs access to window to launch "game over" screen</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="Model.html#Model-int-int-javafx.stage.Stage-">Model</a></span>(int&nbsp;w,
     int&nbsp;h,
     javafx.stage.Stage&nbsp;st)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#addSparks-GameObj-int-int-int-int:A-">addSparks</a></span>(GameObj&nbsp;obj,
         int&nbsp;duration,
         int&nbsp;scale,
         int&nbsp;scaleVariance,
         int[]&nbsp;rgb)</code>
<div class="block">Creates a cluster of particle effects</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#addToLives-int-">addToLives</a></span>(int&nbsp;n)</code>
<div class="block">Adds to remaining lives</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#addToScore-int-">addToScore</a></span>(int&nbsp;n)</code>
<div class="block">Updates the score</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#brickScore-javafx.scene.layout.Pane-double-double-java.lang.String-int-">brickScore</a></span>(javafx.scene.layout.Pane&nbsp;p,
          double&nbsp;xPos,
          double&nbsp;yPos,
          java.lang.String&nbsp;message,
          int&nbsp;duration)</code>
<div class="block">This spawns a label as a particle</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>GameObj</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getBall--">getBall</a></span>()</code>
<div class="block">Return ball object</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>BatObj</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getBat--">getBat</a></span>()</code>
<div class="block">Return bat object</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.ArrayList&lt;BrickObj&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getBricks--">getBricks</a></span>()</code>
<div class="block">Return bricks</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.Boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getFast--">getFast</a></span>()</code>
<div class="block">Return game speed</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.Boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getGameRunning--">getGameRunning</a></span>()</code>
<div class="block">Return game running state</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getLevel--">getLevel</a></span>()</code>
<div class="block">Gets the level</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getLives--">getLives</a></span>()</code>
<div class="block">Gets the remaining lives</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#getScore--">getScore</a></span>()</code>
<div class="block">Return score</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#initialiseGame--">initialiseGame</a></span>()</code>
<div class="block">This sets up the game world</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#modelChanged--">modelChanged</a></span>()</code>
<div class="block">This is how the Model talks to the View</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#moveBat-int-">moveBat</a></span>(int&nbsp;direction)</code>
<div class="block">Move the bat one step</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#playSound-java.lang.String-">playSound</a></span>(java.lang.String&nbsp;musicFile)</code>
<div class="block">Plays sound file</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#runGame--">runGame</a></span>()</code>
<div class="block">This is the main animation loop for the game.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#setFast-java.lang.Boolean-">setFast</a></span>(java.lang.Boolean&nbsp;value)</code>
<div class="block">Change game speed</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#setGameRunning-java.lang.Boolean-">setGameRunning</a></span>(java.lang.Boolean&nbsp;value)</code>
<div class="block">Change game running state</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#setLevel-int-">setLevel</a></span>(int&nbsp;lev)</code>
<div class="block">Sets the level</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#spark-javafx.scene.layout.Pane-double-double-int-int-int-int:A-">spark</a></span>(javafx.scene.layout.Pane&nbsp;p,
     double&nbsp;xPos,
     double&nbsp;yPos,
     int&nbsp;dur,
     int&nbsp;scale,
     int&nbsp;scaleVariance,
     int[]&nbsp;color)</code>
<div class="block">This spawns an asterisk label as a particle</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>java.lang.Thread</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#startGame--">startGame</a></span>()</code>
<div class="block">Starts animation thread</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Model.html#updateGame--">updateGame</a></span>()</code>
<div class="block">This updates the state of the game world.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="B">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>B</h4>
<pre>public&nbsp;int B</pre>
<div class="block">Border round the edge of the panel</div>
</li>
</ul>
<a name="ball">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ball</h4>
<pre>public&nbsp;GameObj ball</pre>
<div class="block">The ball object</div>
</li>
</ul>
<a name="BALL_MOVE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BALL_MOVE</h4>
<pre>public&nbsp;int BALL_MOVE</pre>
<div class="block">Units to move the ball on each step</div>
</li>
</ul>
<a name="BALL_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BALL_SIZE</h4>
<pre>public&nbsp;int BALL_SIZE</pre>
<div class="block">Ball size</div>
</li>
</ul>
<a name="bat">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bat</h4>
<pre>public&nbsp;BatObj bat</pre>
<div class="block">The bat object</div>
</li>
</ul>
<a name="BAT_DIR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAT_DIR</h4>
<pre>public&nbsp;int BAT_DIR</pre>
<div class="block">Indicates if bat is travelling Left or Right</div>
</li>
</ul>
<a name="BAT_HEIGHT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAT_HEIGHT</h4>
<pre>public&nbsp;int BAT_HEIGHT</pre>
<div class="block">Bat height</div>
</li>
</ul>
<a name="BAT_MOVE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAT_MOVE</h4>
<pre>public&nbsp;int BAT_MOVE</pre>
<div class="block">Distance to move the bat on each update</div>
</li>
</ul>
<a name="BAT_WIDTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAT_WIDTH</h4>
<pre>public&nbsp;int BAT_WIDTH</pre>
<div class="block">Bat width</div>
</li>
</ul>
<a name="BRICK_HEIGHT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BRICK_HEIGHT</h4>
<pre>public&nbsp;int BRICK_HEIGHT</pre>
<div class="block">Brick height</div>
</li>
</ul>
<a name="BRICK_WIDTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BRICK_WIDTH</h4>
<pre>public&nbsp;int BRICK_WIDTH</pre>
<div class="block">Brick width</div>
</li>
</ul>
<a name="bricks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bricks</h4>
<pre>public&nbsp;java.util.ArrayList&lt;BrickObj&gt; bricks</pre>
<div class="block">Array of the bricks</div>
</li>
</ul>
<a name="controller">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>controller</h4>
<pre>Controller controller</pre>
<div class="block">Reference to the controller object</div>
</li>
</ul>
<a name="fast">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fast</h4>
<pre>public&nbsp;boolean fast</pre>
<div class="block">Depreciated</div>
</li>
</ul>
<a name="gameRunning">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gameRunning</h4>
<pre>public&nbsp;boolean gameRunning</pre>
<div class="block"><code>True</code> if game is running <code>false</code> if not.  Can be set to stop the game</div>
</li>
</ul>
<a name="generator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generator</h4>
<pre>public&nbsp;java.util.Random generator</pre>
<div class="block">Random number generator</div>
</li>
</ul>
<a name="height">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>height</h4>
<pre>public&nbsp;int height</pre>
<div class="block">Height of game window</div>
</li>
</ul>
<a name="HIT_BOTTOM">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HIT_BOTTOM</h4>
<pre>public&nbsp;int HIT_BOTTOM</pre>
<div class="block">Score (penalty) for hitting the bottom of the screen</div>
</li>
</ul>
<a name="HIT_BRICK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HIT_BRICK</h4>
<pre>public&nbsp;int HIT_BRICK</pre>
<div class="block">Score for hitting a brick</div>
</li>
</ul>
<a name="level">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>level</h4>
<pre>public&nbsp;int level</pre>
<div class="block">Which level is being played</div>
</li>
</ul>
<a name="lives">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lives</h4>
<pre>public&nbsp;int lives</pre>
<div class="block">Player lives remaining</div>
</li>
</ul>
<a name="M">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>M</h4>
<pre>public&nbsp;int M</pre>
<div class="block">Height of the menu bar area at the top of the screen</div>
</li>
</ul>
<a name="nextSpeedup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextSpeedup</h4>
<pre>public&nbsp;int nextSpeedup</pre>
<div class="block">Interval in seconds until the game next speeds the ball up</div>
</li>
</ul>
<a name="score">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>score</h4>
<pre>public&nbsp;int score</pre>
<div class="block">The score</div>
</li>
</ul>
<a name="start">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;long start</pre>
<div class="block">System time in milliseconds when the level commenced</div>
</li>
</ul>
<a name="view">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>view</h4>
<pre>View view</pre>
<div class="block">Reference to the view object</div>
</li>
</ul>
<a name="width">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>width</h4>
<pre>public&nbsp;int width</pre>
<div class="block">Width of game window</div>
</li>
</ul>
<a name="window">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>window</h4>
<pre>public&nbsp;javafx.stage.Stage window</pre>
<div class="block">The model needs access to window to launch "game over" screen</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Model-int-int-javafx.stage.Stage-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Model</h4>
<pre>public&nbsp;Model(int&nbsp;w,
             int&nbsp;h,
             javafx.stage.Stage&nbsp;st)</pre>
<div class="block"><h2>Constructor</h2>
        
        <p>The constructor saves the window dimensions.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>w</code> - Width of window</dd>
<dd><code>h</code> - Height of window</dd>
<dd><code>st</code> - Window object</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addSparks-GameObj-int-int-int-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSparks</h4>
<pre>public&nbsp;void&nbsp;addSparks(GameObj&nbsp;obj,
                      int&nbsp;duration,
                      int&nbsp;scale,
                      int&nbsp;scaleVariance,
                      int[]&nbsp;rgb)</pre>
<div class="block"><h2>Creates a cluster of particle effects</h2>
        
        <p>This is used to spawn impact sparks when the ball collides with a brick, and also to make a trail for the ball
        When called, it makes 10 calls to the <code>spark()</code> function and generates a randomised colour for each one.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - The pane to register this particle effect to</dd>
<dd><code>xPos</code> - The x position on the window to place this particle</dd>
<dd><code>yPos</code> - The y position on the window to place this particle</dd>
<dd><code>dur</code> - The length of time in milliseconds the particle takes to complete the move</dd>
<dd><code>scale</code> - The base size of this particle</dd>
<dd><code>scaleVariance</code> - Number to randomly select the size of the particle</dd>
<dd><code>color</code> - the r g b values for the spark in the form of an array</dd>
</dl>
</li>
</ul>
<a name="addToLives-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToLives</h4>
<pre>public&nbsp;void&nbsp;addToLives(int&nbsp;n)</pre>
<div class="block"><h2>Adds to remaining lives</h2>
        
        <p>Can be positive or negative</p></div>
</li>
</ul>
<a name="addToScore-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToScore</h4>
<pre>public&nbsp;void&nbsp;addToScore(int&nbsp;n)</pre>
<div class="block"><h2>Updates the score</h2></div>
</li>
</ul>
<a name="brickScore-javafx.scene.layout.Pane-double-double-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>brickScore</h4>
<pre>public&nbsp;void&nbsp;brickScore(javafx.scene.layout.Pane&nbsp;p,
                       double&nbsp;xPos,
                       double&nbsp;yPos,
                       java.lang.String&nbsp;message,
                       int&nbsp;duration)</pre>
<div class="block"><h2>This spawns a label as a particle</h2>
        
        <p>Spawns a message on screen as a particle effect.
        The message will rise up for the duration set in the params, then delete itself.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - The pane to register this particle effect to</dd>
<dd><code>xPos</code> - The x position on the window to place this particle</dd>
<dd><code>yPos</code> - The y position on the window to place this particle</dd>
<dd><code>message</code> - The contents of the message</dd>
</dl>
</li>
</ul>
<a name="getBall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBall</h4>
<pre>public&nbsp;GameObj&nbsp;getBall()</pre>
<div class="block"><h2>Return ball object</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ball object</dd>
</dl>
</li>
</ul>
<a name="getBat--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBat</h4>
<pre>public&nbsp;BatObj&nbsp;getBat()</pre>
<div class="block"><h2>Return bat object</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>bat object</dd>
</dl>
</li>
</ul>
<a name="getBricks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBricks</h4>
<pre>public&nbsp;java.util.ArrayList&lt;BrickObj&gt;&nbsp;getBricks()</pre>
<div class="block"><h2>Return bricks</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>arraylist of bricks</dd>
</dl>
</li>
</ul>
<a name="getFast--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFast</h4>
<pre>public&nbsp;java.lang.Boolean&nbsp;getFast()</pre>
<div class="block"><h2>Return game speed</h2>
        
        <p><code>false</code> is normal speed, <code>true</code> is fast</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>game speed</dd>
</dl>
</li>
</ul>
<a name="getGameRunning--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGameRunning</h4>
<pre>public&nbsp;java.lang.Boolean&nbsp;getGameRunning()</pre>
<div class="block"><h2>Return game running state</h2></div>
</li>
</ul>
<a name="getLevel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLevel</h4>
<pre>public&nbsp;int&nbsp;getLevel()</pre>
<div class="block"><h2>Gets the level</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>level (numerical)</dd>
</dl>
</li>
</ul>
<a name="getLives--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLives</h4>
<pre>public&nbsp;int&nbsp;getLives()</pre>
<div class="block"><h2>Gets the remaining lives</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of lives</dd>
</dl>
</li>
</ul>
<a name="getScore--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScore</h4>
<pre>public&nbsp;int&nbsp;getScore()</pre>
<div class="block"><h2>Return score</h2></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>score</dd>
</dl>
</li>
</ul>
<a name="initialiseGame--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialiseGame</h4>
<pre>public&nbsp;void&nbsp;initialiseGame()</pre>
<div class="block"><h2>This sets up the game world</h2>
        
        <ul>
          <li>Initialises game variables</li>
          <li>Spawns all game objects</li>
          <li>Selects level</li>
        </ul></div>
</li>
</ul>
<a name="modelChanged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modelChanged</h4>
<pre>public&nbsp;void&nbsp;modelChanged()</pre>
<div class="block"><h2>This is how the Model talks to the View</h2>
        
        <p>Whenever the <code>Model</code> changes, this method calls the <code>update</code> method in the <code>View</code>. It needs to run in the JavaFX event thread, and <code>Platform.runLater</code> 
        is a utility that makes sure this happens even if called from the <code>runGame</code> thread</p></div>
</li>
</ul>
<a name="moveBat-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveBat</h4>
<pre>public&nbsp;void&nbsp;moveBat(int&nbsp;direction)</pre>
<div class="block"><h2>Move the bat one step</h2>
        
        <p>-1 is left, +1 is right</p></div>
</li>
</ul>
<a name="playSound-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>playSound</h4>
<pre>public&nbsp;void&nbsp;playSound(java.lang.String&nbsp;musicFile)</pre>
<div class="block"><h2>Plays sound file</h2>
        
        <p>Uses string as path to sound file</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>musicFile</code> - path in local folder to music file</dd>
</dl>
</li>
</ul>
<a name="runGame--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runGame</h4>
<pre>public&nbsp;void&nbsp;runGame()</pre>
<div class="block"><h2>This is the main animation loop for the game.</h2>
        
        <p>This runs the <code>initialiseGame()</code> method, then updates the game state and screen in a loop every few milliseconds by running 
        <code>updateGame()</code> and <code>modelChanged()</code>.
        The section after was added by me to select the appropriate 'new level' pane or 'game over' pane based on the players outcome.
        Initially, I had this code running in the View object, but there were synchronisation issues and sometimes a second instance of the game 
        would spawn.  After checking with Roger, he suggested relocating the code back to the <code>Model</code> because the <code>View</code> should only be for rendering 
        the changes, and not making them.</p>
        
        <p>Moving the code to here allows the game to finish completely before the new pane is loaded.  I managed to debug this using a combination of breakpoints and 
        <code>Debug.trace()</code> calls.  By placing debug messages at the start of every function, it is possible to see which ones have not been called when they should 
        and (in this case) which ones are firing multiple times.  Once I found the culprits, I then set breakpoints in likely places to follow the chain of events.<p>
        
        <p>I made a test build of the game for doing this because it can be quite destructive when commenting out code and adding in test code.  Due to the nature of the 
        problem (that it only happened after the first level was complete and the game had been played through at least once), I had to destroy the bricks by script in 
        order to finish the level quicker and inspect the results.  I feel is quite hard to even discover these kind of problems, as they require in depth testing 
        (often in a live environment), which means playtesting the game over and over.  However, I did manage to uncover some other minor issues while trying to reproduce 
        this problem, which made the endeavour more fruitful.</p></div>
</li>
</ul>
<a name="setFast-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFast</h4>
<pre>public&nbsp;void&nbsp;setFast(java.lang.Boolean&nbsp;value)</pre>
<div class="block"><h2>Change game speed</h2>
        
        <p><code>false</code> is normal speed, <code>true</code> is fast</p></div>
</li>
</ul>
<a name="setGameRunning-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setGameRunning</h4>
<pre>public&nbsp;void&nbsp;setGameRunning(java.lang.Boolean&nbsp;value)</pre>
<div class="block"><h2>Change game running state</h2>
        
        <p>set to <code>false</code> to stop the game</p></div>
</li>
</ul>
<a name="setLevel-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLevel</h4>
<pre>public&nbsp;void&nbsp;setLevel(int&nbsp;lev)</pre>
<div class="block"><h2>Sets the level</h2>
        
        <p>Sets the level to the numerical input</p></div>
</li>
</ul>
<a name="spark-javafx.scene.layout.Pane-double-double-int-int-int-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spark</h4>
<pre>public&nbsp;void&nbsp;spark(javafx.scene.layout.Pane&nbsp;p,
                  double&nbsp;xPos,
                  double&nbsp;yPos,
                  int&nbsp;dur,
                  int&nbsp;scale,
                  int&nbsp;scaleVariance,
                  int[]&nbsp;color)</pre>
<div class="block"><h2>This spawns an asterisk label as a particle</h2>
    
        <p>Spawns a 'spark' (asterisk) on screen with a random colour and direction.
        The spark will move towards this direction, then delete itself once the move is complete.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - The pane to register this particle effect to</dd>
<dd><code>xPos</code> - The x position on the window to place this particle</dd>
<dd><code>yPos</code> - The y position on the window to place this particle</dd>
<dd><code>dur</code> - The length of time in milliseconds the particle takes to complete the move</dd>
<dd><code>scale</code> - The base size of this particle</dd>
<dd><code>scaleVariance</code> - Number to randomly select the size of the particle</dd>
<dd><code>color</code> - the r g b values for the spark in the form of an array</dd>
</dl>
</li>
</ul>
<a name="startGame--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startGame</h4>
<pre>public&nbsp;java.lang.Thread&nbsp;startGame()</pre>
<div class="block"><h2>Starts animation thread</h2>
        
        <p>Starts animation thread and returns the thread handle.  I added the return so I could have access to the thread when I was runnning the game stop code in the 
        <code>View</code>.  Now the code to halt the game is back in the <code>Model</code>, the return is now kept as legacy code but largely unneeded.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The thread handle</dd>
</dl>
</li>
</ul>
<a name="updateGame--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>updateGame</h4>
<pre>public&nbsp;void&nbsp;updateGame()</pre>
<div class="block"><h2>This updates the state of the game world.</h2>
        
        <p>This method deals with the following:</p>
        
        <ul>
          <li>Checks if the ball needs to be sped up (every 30 seconds)</li>
          <li>Moves the ball</li>
          <li>Checks for collision with walls</li>
          <li>Checks for collision with the bat</li>
          <li>Checks for collision with walls</li>
          <li>Checks for collision with the floor</li>
          <li>Checks for collision with the roof</li>
          <li>Checks for collision with any bricks</li>
          <li>Stops the game if the player is out of lives</li>
          <li>Ends the level if the bricks are all destroyed</li>
        </ul>
        
        <p>I decided to add some code to speed up the ball periodically.  This increases a sense of urgency in the game and adds challenge for the player.  I added an 
        audio cue, and also a particle label so they can see the game has decided to speed up the ball in case they miss the audio cue in the clutter.
        Additionally a visual cue was added when the ball strikes the floor, so players can see instantly that they have lost a life.  I found during testing that if I 
        glanced up at the status bar, then I would lose track of the ball and make a mistake.</p>
        
        <p>During testing, I found that the ball could wedge itself in the walls/ceiling/floor and appear to hover.  This became more apparent as the speed of the 
        game was increased.  I deduced (from some debug hints) that the ball had gone so far into the surface that every frame it was changing direction, but never 
        moving enough to be free of the surface it was trapped in.</p>
        
        <p>I decided to add some additional checks to make sure that the ball only ever reversed direction if it was heading into the surface.  For example, if the ball 
        strikes the left wall, and is moving left, then flip the x direction.  But if the ball is in the left wall and moving right, then do nothing so it can move clear
        of the wall.</p>
        
        <p>I also moved the code that checks for collision with the bat above the block of code that checks for collision with the floor to give it priority.  
        Although this is personal preference, I wanted to give players the benefit of the doubt if there was a contestable decision.  There was an issue where the ball 
        would get trapped under the bat and drain multiple lives from the player, but this change in conjunction with the checks for direction and collision seem to have 
        allieviated the problem.</p>
        
        <p>The code to check collisions with the bricks is a standard loop to go through all the brick objects and check for intersection with the ball object.  
        If a collision is found, then a further function determines if the brick was hit on the side or on the (top/bottom).  I added this in because the ball would
        flip its Y direction if it struck the side of a brick, which seemed counter-intuitive for gameplay.</p>
        
        <p>I feel this could be improved in terms of performance however.  It seems wasteful to check for collisions with every object, especially when some of them may 
        be on the other side of the pane.  I was trialling a 'safe zone' which is laid out after the bricks spawn and therefore if the ball is within it, then there is no 
        need to check for collisions with the bricks.  An alternative would be to store the positions of the bricks immediate neighbours in the brick object, so if a 
        collision was determined to have happened with that certain brick, then only the other brick objects near it would need to be checked.  Unfortunately though, I ran 
        out of time and had to prioritise making making the game system work as a whole, and not just one really good aspect at the detriment of everything else.</p>
        
        <p>The bricks have an armour value which degrades every time the ball strikes them.  This is stored as a property in each brick object.  
        They are coloured green initially, then as their armour degrades, it turns orange, then red.  
        Once it is red, the next successive hit will destroy them.  When a brick is hit by the ball, a sound effect will play and some impact sparks 
        will be spawned at the brick position.  I wanted to add this to add some atmosphere and fun for the player as well as giving them some audial and visual feedback 
        on their actions.  Additionally, a label particle is spawned which informs the player how many points they have accrued.</p>
        
        <p>I also made a modification to the way the ball responds to the bat.  Normally, the movement vector would be something like [1,1], [1,-1],[-1,-1] or [-1,1].  
        This is to say that the ball only ever moves in diagonals.  I added some code into the method, so the ball would respond to the bat direction.  This allows the 
        player to change the direction of the ball when it is struck, much the same as a snooker player might try and slice a shot.  I would have liked to expand on
        this more and replace the entire movement system with vectors, but my experiments were not fruitful enough in the time I had available.</p>
        
        <p>The last modification was to run a check to see if the bricks have been totally destoyed, or if the player is out of lives.  In either case, it sets 
        <code>setGameRunning(false)</code> so the loop can quit then run the pane select code after.</p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
